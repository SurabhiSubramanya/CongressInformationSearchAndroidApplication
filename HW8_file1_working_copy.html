<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <!--RESPONSIVE DESIGN-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--INCLUDE LIBRARIES REQUIRED FOR BOOTSTRAP-->

    <!--LIBRARIES FOR jQuery-->
    <script src="http://code.jquery.com/jquery.min.js"></script>

    <!--ANGULAR JS LIBRARIES-->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

    <!--FONT AWESOME LIBRARIES-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!--DIR PAGINATION JAVASCRIPT FILE-->
    <script src="dirPagination.js"></script>

    <!--MOMENT.JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.16.0/moment.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-moment/1.0.0/angular-moment.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!--LATEST COMPILED AND MINIFIED JAVASCRIPT-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->

    <!--END BOOTSTRAP LIBRARIES-->

    <!--EXTERNAL CSS FILE-->
    <link rel="stylesheet" type="text/css" href="HW8_file2.css">

    <!-- EXTERNAL JAVASCRIPT FILE-->
    <script type="text/javascript" src="HW8_file3.js"></script>

</head>

<body ng-app="myApp" ng-controller="myCtrlLeg">

    <nav class="navbar navbar-default">
        <div class="container-fluid">

            <div class="navbar-header">
                <a href="#menu-toggle" class="btn btn-default" id="menu-toggle">

                    <span class="glyphicon glyphicon-menu-hamburger"></span>
                </a>

                <div class="brand-center">
                    <span><a href="http://sunlightfoundation.com/" target="_blank"><img class="logo" src="http://cs-server.usc.edu:45678/hw/hw8/images/logo.png"></a>
                <span class="logo_text">Congress API</span></span>
                </div>
            </div>
        </div>
    </nav>

    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav" style="margin-right:1px">
                <li class="active">
                    <a href="" ng-click="checkClick('legislators')"><span class="glyphicon glyphicon-user"></span> Legislators</a>
                </li>
                <li>
                    <a href="" ng-click="checkClick('bills')"><span class="glyphicon glyphicon-file"></span> Bills</a>
                </li>
                <li>
                    <a href="" ng-click="checkClick('committees')"><span class="glyphicon glyphicon-log-in"></span> Committees</a>
                </li>
                <li>
                    <a href="" ng-click="checkClick('favorites')"><span class="glyphicon glyphicon-star"></span> Favorites</a>
                </li>
            </ul>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <!---------------------DISPLAY FOR LEGISLATORS STARTS HERE--->
            <div class="container-fluid" id="legislatorsDisplay">
                <!--<div class="row">-->
                <!-- <div class="col-lg-12">-->
                <h2>Legislators</h2>
                <hr>
                <div id="viewDetailsCarouselLegislators" class="carousel slide" data-interval="false">
                    <div class="carousel-inner">
                        <div class="item active">
                            <ul class="nav nav-tabs">
                                <li class="active"><a data-toggle="tab" href="#state">By State</a></li>
                                <li><a data-toggle="tab" href="#house">House</a></li>
                                <li><a data-toggle="tab" href="#senate">Senate</a></li>
                            </ul>

                            <!-------LEGISLATORS FIRST TAB - BY STATE----->
                            <div class="tab-content">
                                <div id="state" class="tab-pane fade in active">
                                    <br>
                                    <div class="table-header">
                                        <h5 class="table-header-style" style="display:inline-block">Legislators By State</h5>
                                        <span class="select-state">
                            <select ng-model="selectedState">
                                <option selected="selected" value="">All States</option>
                                <option ng-repeat="x in stateNames" value="{{x.name}}">{{x.name}}</option>
                            </select>
                            </span>
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Party</th>
                                                    <th>Name</th>
                                                    <th>Chamber</th>
                                                    <th>District</th>
                                                    <th>State</th>
                                                    <th> </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr dir-paginate="x in records | orderBy: 'state_name' | filter: selectedState | itemsPerPage:10" pagination-id="recordsState">
                                                    <td><img ng-src="{{checkPartyImage(x.party)}}" width="25" height="25"></td>
                                                    <td>{{x.last_name + "," + " " + x.first_name}}</td>
                                                    <td><img ng-src="{{checkChamberImage(x.chamber)}}" width="25" height="25">
                                                        <div style="display:inline">{{x.chamber | capitalize}}</div>
                                                    </td>
                                                    <td>{{checkDistrict(x.district)}}</td>
                                                    <td>{{x.state_name}}</td>
                                                    <td>
                                                        <button type="button" class="btn btn-primary" ng-click="getViewDetailsLeg(x)">View Details</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <center>
                                            <dir-pagination-controls max-size="10" boundary-links="true" direction-links="true" pagination-id="recordsState"></dir-pagination-controls>
                                        </center>
                                    </div>
                                    <!--table responsive-->

                                </div>
                                <!-------LEGISLATORS FIRST TAB END - BY STATE----->
                                <!-------LEGISLATORS SECOND TAB - HOUSE----->
                                <div id="house" class="tab-pane fade">
                                    <br>
                                    <div class="table-header">
                                        <h5 class="table-header-style" style="display:inline-block">Legislators By House</h5>
                                        <span class="searchValue">
                            <input type="text" class="form-control" placeholder="Search" ng-model="searchHouse">
                            </span>
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Party</th>
                                                    <th>Name</th>
                                                    <th>Chamber</th>
                                                    <th>District</th>
                                                    <th>State</th>
                                                    <th> </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr dir-paginate="x in records | orderBy: 'last_name' | filter:filterHouse | filter: searchHouse | itemsPerPage:10" pagination-id="recordsHouse">
                                                    <td><img ng-src="{{checkPartyImage(x.party)}}" width="25" height="25"></td>
                                                    <td>{{x.last_name + "," + " " + x.first_name}}</td>
                                                    <td><img ng-src="http://cs-server.usc.edu:45678/hw/hw8/images/h.png" width="25" height="25">
                                                        <div style="display:inline">{{x.chamber | capitalize}}</div>
                                                    </td>
                                                    <td>{{checkDistrict(x.district)}}</td>
                                                    <td>{{x.state_name}}</td>
                                                    <td>
                                                        <button type="button" class="btn btn-primary" ng-click="getViewDetailsLeg(x)">View Details</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <center>
                                            <dir-pagination-controls max-size="10" boundary-links="true" direction-links="true" pagination-id="recordsHouse"></dir-pagination-controls>
                                        </center>
                                    </div>
                                    <!--table responsive-->

                                </div>
                                <!-------LEGISLATORS THIRD TAB - SENATE----->
                                <div id="senate" class="tab-pane fade">
                                    <br>
                                    <div class="table-header">
                                        <h5 class="table-header-style" style="display:inline-block">Legislators By Senate</h5>
                                        <span class="searchValue">
                            <input type="text" class="form-control" placeholder="Search" ng-model="searchSenate">
                            </span>
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Party</th>
                                                    <th>Name</th>
                                                    <th>Chamber</th>
                                                    <th>State</th>
                                                    <th> </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr dir-paginate="x in records | orderBy: 'last_name' | filter:filterSenate | filter: searchSenate | itemsPerPage:10" pagination-id="recordsSenate">
                                                    <td><img ng-src="{{checkPartyImage(x.party)}}" width="25" height="25"></td>
                                                    <td>{{x.last_name + "," + " " + x.first_name}}</td>
                                                    <td><img ng-src="http://cs-server.usc.edu:45678/hw/hw8/images/s.svg" width="25" height="25">
                                                        <div style="display:inline">{{x.chamber | capitalize}}</div>
                                                    </td>
                                                    <td>{{x.state_name}}</td>
                                                    <td>
                                                        <button type="button" class="btn btn-primary" ng-click="getViewDetailsLeg(x)">View Details</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <center>
                                            <dir-pagination-controls max-size="10" boundary-links="true" direction-links="true" pagination-id="recordsSenate"></dir-pagination-controls>
                                        </center>
                                    </div>
                                    <!--table responsive-->

                                </div>
                                <!-------LEGISLATORS THIRD TAB ENDS - SENATE----->
                            </div>
                        </div>
                        <!--tab content-->
                        <div class="item">
                            <div class="row">
                                <div class="table-header" style="background: none">
                                    <button class="btn btn-default back_style" ng-click="goBackLeg()"><i class="fa fa-chevron-left" aria-hidden="true"></i></button>
                                    <p class="table-header-style" style="display:inline-block;font-size:20px;">Details</p>
                                    <button class="btn btn-default star_style" ng-click="storeFavLeg(getCurrentLegislator)">
                                        <span ng-show="!checkStorageLeg(getCurrentLegislator)" class="glyphicon glyphicon-star-empty" style="float:right;display:inline;">
                                        </span>

                                        <span ng-show="checkStorageLeg(getCurrentLegislator)" class="glyphicon glyphicon-star" style="float:right;display:inline;color:yellow;outline-color:black">
                                        </span>
                                    </button>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-md-3">
                                        <!--REPLACE BIOGUIDE ID AS x.bioguide_id IN URL  | https://theunitedstates.io/images/congress/original/{{x.bioguide_id}}.jpg-->
                                        <img src="https://theunitedstates.io/images/congress/original/{{getCurrentLegislator.bioguide_id}}.jpg" width="250" height="250" style="padding-left:50px">
                                    </div>
                                    <div class="col-md-3">
                                        <div class="table-responsive">
                                            <table class="table borderless" style="border:0px !important;">
                                                <tr>
                                                    <!--{{x.title + " . " + x.last_name + " , " + x.first_name}} -->
                                                    <td colspan="3">{{getCurrentLegislator.title + ". " + getCurrentLegislator.last_name + ", " + getCurrentLegislator.first_name}}</td>
                                                </tr>
                                                <tr>
                                                    <!--x.oc_email MAY BE NULL CHECK -->
                                                    <td colspan="3">
                                                        <a ng-show="(getCurrentLegislator.oc_email)? true : false" href="mailto:{{checkEmail(getCurrentLegislator.oc_email)}}">{{checkEmailText(getCurrentLegislator.oc_email)}}</a>
                                                        <div ng-show="(getCurrentLegislator.oc_email)? false : true">N.A.</div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <!--x.chamber-->
                                                    <td colspan="3">{{"Chamber: " + capitalizeFunction(getCurrentLegislator.chamber)}}</td>
                                                </tr>
                                                <tr>
                                                    <!--x.phone-->
                                                    <td colspan="3">Contact: <a href="tel:{{checkContact(getCurrentLegislator.phone)}}">{{checkContactText(getCurrentLegislator.phone)}}</a></td>
                                                </tr>
                                                <tr>
                                                    <!--Party Image + Party name x.party use checkPartyImage function-->
                                                    <td colspan="3"><img ng-src="{{checkPartyImage(getCurrentLegislator.party)}}" width="25" height="25">{{checkParty(getCurrentLegislator.party)}}</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="table-header" style="background: none">
                                            <h5 class="table-header-style" style="display:inline-block"><b>Committees</b></h5>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table borderless" style="border:0px !important;">
                                                <tr>
                                                    <!--x.chamber-->
                                                    <th>Chamber</th>
                                                    <!--x.committee_id-->
                                                    <th>Committee ID</th>
                                                    <!--x.name-->
                                                    <th>Name</th>
                                                </tr>
                                                <tr ng-repeat="x in getCurrentLegislatorCommittees">
                                                    <td>{{capitalizeFunction(x.chamber)}}</td>
                                                    <td>{{x.committee_id}}</td>
                                                    <td>{{(x.name)}}</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="float: left">
                                    <div class="col-md-12">
                                        <div class="col-md-6">
                                            <div class="table-responsive">
                                                <table class="table borderless" style="border:0px !important">
                                                    <tr>
                                                        <!--x.term_start as MM-DD-YYYY-->
                                                        <td><b>Start Term</b></td>
                                                        <td colspan="5">{{convertDate(getCurrentLegislator.term_start)}}</td>
                                                    </tr>
                                                    <tr>
                                                        <!--x.term_end as MM-DD-YYYY-->
                                                        <td><b>End Term</b></td>
                                                        <td colspan="5">{{convertDate(getCurrentLegislator.term_end)}}</td>
                                                    </tr>
                                                    <tr>
                                                        <!-- (now -start) / (end -start) * 100-->
                                                        <td><b>Term</b></td>
                                                        <td colspan="5">
                                                            <div class="progress">
                                                                <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{progressValue(getCurrentLegislator.term_start,getCurrentLegislator.term_end)}}" aria-valuemin="0" aria-valuemax="100" ng-style="{'width': progressValue(getCurrentLegislator.term_start,getCurrentLegislator.term_end).toString() + '%'}"> {{progressValue(getCurrentLegislator.term_start,getCurrentLegislator.term_end) + "%"}}
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <!--x.office-->
                                                        <td><b>Office</b></td>
                                                        <td colspan="5">{{getCurrentLegislator.office}}</td>
                                                    </tr>
                                                    <tr>
                                                        <!--x.state_name-->
                                                        <td><b>State</b></td>
                                                        <td colspan="5">{{getCurrentLegislator.state_name}}</td>
                                                    </tr>
                                                    <tr>
                                                        <!--x.fax-->
                                                        <td><b>Fax</b></td>
                                                        <td colspan="5">{{checkFax(getCurrentLegislator.fax)}}</td>
                                                    </tr>
                                                    <tr>
                                                        <!--x.birthday as MM-DD-YYYY-->
                                                        <td><b>Birthday</b></td>
                                                        <td colspan="5">{{convertDate(getCurrentLegislator.birthday)}}</td>
                                                    </tr>
                                                    <tr>
                                                        <!--LINK IMAGES TO SOCIAL MEDIA LINKS - facebook.com/x.facebook_id | twitter.com/x.twitter_id | x.website-->
                                                        <td><b>Social Links</b></td>
                                                        <td colspan="5">
                                                            <a ng-show="getCurrentLegislator.twitter_id ? true : false" href="http://twitter.com/{{getCurrentLegislator.twitter_id}}" target="_blank"><img src="http://cs-server.usc.edu:45678/hw/hw8/images/t.png" width="20" height="20"></a>
                                                            <a ng-show="getCurrentLegislator.facebook_id ? true : false" href="http://facebook.com/{{getCurrentLegislator.facebook_id}}" target="_blank"><img src="http://cs-server.usc.edu:45678/hw/hw8/images/f.png" width="20" height="20"></a>
                                                            <a ng-show="getCurrentLegislator.website ? true : false" href="{{checkWebsite(getCurrentLegislator.website)}}" target="_blank"><img src="http://cs-server.usc.edu:45678/hw/hw8/images/w.png" width="20" height="20"></a>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="table-header" style="background: none">
                                                <h5 class="table-header-style" style="display:inline-block"><b>Bills</b></h5>
                                            </div>
                                            <div class="table-responsive">
                                                <table class="table borderless" style="border:0px !important;">
                                                    <tr>
                                                        <!--x.bill_id-->
                                                        <th>Bill ID</th>
                                                        <!--x.official_title-->
                                                        <th>Title</th>
                                                        <!--x.chamber-->
                                                        <th>Chamber</th>
                                                        <!--x.bill_type-->
                                                        <th>Bill Type</th>
                                                        <!--x.congress-->
                                                        <th>Congress</th>
                                                        <!--x.last_version.urls.pdf-->
                                                        <th>Link</th>
                                                    </tr>
                                                    <tr ng-repeat="x in getCurrentLegislatorBills">
                                                        <td>{{x.bill_id | uppercase}}</td>
                                                        <td>{{x.official_title}}</td>
                                                        <td>{{x.chamber}}</td>
                                                        <td>{{x.bill_type}}</td>
                                                        <td>{{x.congress}}</td>
                                                        <td><a href="{{checkPdf(x.last_version.urls.pdf)}}">{{checkPdfText(x.last_version.urls.pdf)}}</a></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <!--outer container-fluid-->

            <!---------------------DISPLAY FOR LEGISLATORS ENDS HERE------------->
            <!---------------------DISPLAY FOR BILLS STARTS HERE----------------->
            <div class="container-fluid" id="billsDisplay">
                <!--<div class="row">-->
                <!-- <div class="col-lg-12">-->
                <h2>Bills</h2>
                <hr>
                <div id="viewDetailsCarouselBills" class="carousel slide" data-interval="false">
                    <div class="carousel-inner">
                        <div class="item active">
                            <ul class="nav nav-tabs">
                                <li class="active"><a data-toggle="tab" href="#activebills">Active Bills</a></li>
                                <li><a data-toggle="tab" href="#newbills">New Bills</a></li>
                            </ul>

                            <div class="tab-content">
                                <!-------BILLS FIRST TAB STARTS - ACTIVE BILLS----->
                                <div id="activebills" class="tab-pane fade in active">
                                    <br>
                                    <div class="table-header">
                                        <h5 class="table-header-style" style="display:inline-block">Active Bills</h5>
                                        <span class="searchValue">
                            <input type="text" class="form-control" placeholder="Search" ng-model="searchBillsActive">
                            </span>
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Bill ID</th>
                                                    <th>Bill Type</th>
                                                    <th style="min-width:50px;max-width:100px">Title</th>
                                                    <th style="min-width:100px;">Chamber</th>
                                                    <th>Introduced On</th>
                                                    <th style="min-width:120px;">Sponsor</th>
                                                    <th> </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr dir-paginate="x in recordsActiveBills | filter: searchBillsActive | itemsPerPage:10" pagination-id="recordsActiveBills">
                                                    <td>{{x.bill_id | uppercase}}</td>
                                                    <td>{{x.bill_type | uppercase}}</td>
                                                    <td>{{(!x.official_title)?"N.A.":x.official_title}}</td>
                                                    <td><img ng-src="{{checkChamberImage(x.chamber)}}" width="25" height="25">
                                                        <div style="display:inline">{{x.chamber | capitalize}}</div>
                                                    </td>
                                                    <td>{{x.introduced_on}}</td>
                                                    <td>{{x.sponsor.title + "." + " " + x.sponsor.last_name + " " + x.sponsor.first_name }}</td>
                                                    <td>
                                                        <button type="button" class="btn btn-primary" ng-click="getViewDetailsBills(x)">View Details</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <center>
                                            <dir-pagination-controls max-size="10" boundary-links="true" direction-links="true" pagination-id="recordsActiveBills"></dir-pagination-controls>
                                        </center>
                                    </div>
                                    <!--table responsive-->

                                    <!--container-fluid-->
                                </div>
                                <!-------BILLS FIRST TAB ENDS - ACTIVE BILLS----->
                                <!-------BILLS SECOND TAB STARTS - ACTIVE BILLS----->
                                <div id="newbills" class="tab-pane fade">
                                    <br>
                                    <div class="table-header">
                                        <h5 class="table-header-style" style="display:inline-block">New Bills</h5>
                                        <span class="searchValue">
                            <input type="text" class="form-control" placeholder="Search" ng-model="searchBillsNew">
                            </span>
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Bill ID</th>
                                                    <th>Bill Type</th>
                                                    <th style="min-width:50px;max-width:100px">Title</th>
                                                    <th style="min-width:100px;">Chamber</th>
                                                    <th>Introduced On</th>
                                                    <th style="min-width:120px;">Sponsor</th>
                                                    <th> </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr dir-paginate="x in recordsNewBills | filter: searchBillsNew | itemsPerPage:10" pagination-id="recordsNewBills">
                                                    <td>{{x.bill_id | uppercase}}</td>
                                                    <td>{{x.bill_type | uppercase}}</td>
                                                    <td>{{(!x.official_title)?"N.A.":x.official_title}}</td>
                                                    <td><img ng-src="{{checkChamberImage(x.chamber)}}" width="25" height="25">
                                                        <div style="display:inline">{{x.chamber | capitalize}}</div>
                                                    </td>
                                                    <td>{{x.introduced_on}}</td>
                                                    <td>{{x.sponsor.title + "." + " " + x.sponsor.last_name + " " + x.sponsor.first_name }}</td>
                                                    <td>
                                                        <button type="button" class="btn btn-primary" ng-click="getViewDetailsBills(x)">View Details</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <center>
                                            <dir-pagination-controls max-size="10" boundary-links="true" direction-links="true" pagination-id="recordsNewBills"></dir-pagination-controls>
                                        </center>
                                    </div>
                                    <!--table responsive-->

                                    <!--container-fluid-->
                                </div>
                                <!-------BILLS SECOND TAB ENDS - NEW BILLS----->
                            </div>
                        </div>
                        <div class="item">
                            <div class="row">
                                <div class="table-header" style="background: none">
                                    <button class="btn btn-default back_style" ng-click="goBackBill()"><i class="fa fa-chevron-left" aria-hidden="true"></i></button>
                                    <p class="table-header-style" style="display:inline-block;font-size:20px;">Details</p>
                                    <button class="btn btn-default star_style" ng-click="storeFavBill(getCurrentBill)">
                                        <span ng-show="!checkStorageBill(getCurrentBill)" class="glyphicon glyphicon-star-empty" style="float:right;display:inline;">
                                        </span>

                                        <span ng-show="checkStorageBill(getCurrentBill)" class="glyphicon glyphicon-star" style="float:right;display:inline;color:yellow;outline-color:black">
                                        </span></button>
                                </div>
                                <br>
                                <div class="col-md-6">
                                    <div class="table-responsive">
                                        <table class="table borderless" style="border:0px !important">
                                            <tr>
                                                <!--x.bill_id-->
                                                <td><b>Bill ID</b></td>
                                                <td>{{getCurrentBill.bill_id | uppercase}}</td>
                                            </tr>
                                            <tr>
                                                <!--x.official_title-->
                                                <td><b>Title</b></td>
                                                <td>{{getCurrentBill.official_title}}</td>
                                            </tr>
                                            <tr>
                                                <!--x.bill_type-->
                                                <td><b>Bill Type</b></td>
                                                <td>{{getCurrentBill.bill_type | uppercase}}</td>
                                            </tr>
                                            <tr>
                                                <!--{{x.sponsor.title + " . " + x.sponsor.last_name + " , " + x.sponsor.first_name}}-->
                                                <td><b>Sponsor</b></td>
                                                <td>{{getCurrentBill.sponsor.title + ". " + getCurrentBill.sponsor.last_name + ", " + getCurrentBill.sponsor.first_name}}</td>
                                            </tr>
                                            <tr>
                                                <!--x.chamber-->
                                                <td><b>Chamber</b></td>
                                                <td>{{capitalizeFunction(getCurrentBill.chamber)}}</td>
                                            </tr>
                                            <tr>
                                                <!--check x.history.active=true or false -  if true Active else New Bill-->
                                                <td><b>Status</b></td>
                                                <td>{{checkBillStatus(getCurrentBill.history.active)}}</td>
                                            </tr>
                                            <tr>
                                                <!--x.introduced_on as MM-DD-YYYY-->
                                                <td><b>Introduced On</b></td>
                                                <td>{{getCurrentBill.introduced_on}}</td>
                                            </tr>
                                            <tr>
                                                <!--x.urls.congress -->
                                                <td><b>Congress URL</b></td>
                                                <td><a href="{{checkCongressUrl(getCurrentBill.urls.congress)}}" target="_blank">{{checkCongressUrlText(getCurrentBill.urls.congress)}}</a></td>
                                            </tr>
                                            <tr>
                                                <!--x.last_version.version_name-->
                                                <td><b>Version Status</b></td>
                                                <td>{{getCurrentBill.last_version.version_name}}</td>
                                            </tr>
                                            <tr>
                                                <!--x.last_version.urls.pdf-->
                                                <td><b>Bill URL</b></td>
                                                <td><a href="{{checkBillUrl(getCurrentBill.last_version.urls.pdf)}}" target="_blank">{{checkBillUrlText(getCurrentBill.last_version.urls.pdf)}}</a></td>
                                            </tr>
                                        </table>
                                    </div>

                                </div>
                                <div class="col-md-6">
                                    <object data="{{getCurrentBill.last_version.urls.pdf}}" type="application/pdf" style="width:100%;height:450px;">
                                    </object>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!---------------------DISPLAY FOR BILLS ENDS HERE---------->
            <!---------------------DISPLAY FOR COMMITTEES STARTS HERE--->
            <div class="container-fluid" id="committeesDisplay">
                <!--<div class="row">-->
                <!-- <div class="col-lg-12">-->
                <h2>Committees</h2>
                <hr>
                <div class="container-fluid">
                    <ul class="nav nav-tabs">
                        <li class="active"><a data-toggle="tab" href="#commhouse">House</a></li>
                        <li><a data-toggle="tab" href="#commsenate">Senate</a></li>
                        <li><a data-toggle="tab" href="#commjoint">Joint</a></li>
                    </ul>

                    <div class="tab-content">
                        <!-------COMMITTEES FIRST TAB STARTS - HOUSE--->
                        <div id="commhouse" class="tab-pane fade in active">
                            <br>
                            <div class="table-header">
                                <h5 class="table-header-style" style="display:inline-block">House</h5>
                                <span class="searchValue">
                            <input type="text" class="form-control" placeholder="Search" ng-model="searchCommitteeHouse">
                            </span>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th> </th>
                                            <th style="min-width:100px;">Chamber</th>
                                            <th>Committee ID</th>
                                            <th>Name</th>
                                            <th>Parent Committee</th>
                                            <th>Contact</th>
                                            <th>Office</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr dir-paginate="x in recordsCommittees | orderBy: 'committee_id' | filter: filterHouse | filter: searchCommitteeHouse | itemsPerPage:10" pagination-id="recordsCommitteesHouse">
                                            <td>
                                                <button ng-click="storeFavComm(x)">
                                                    <span ng-show="!checkStorageComm(x)" class="glyphicon glyphicon-star-empty">
                                                </span>

                                                    <span ng-show="checkStorageComm(x)" class="glyphicon glyphicon-star" style="color:yellow;outline-color:black">
                                        </span>
                                                </button>
                                            </td>
                                            <td><img ng-src="{{checkChamberImage(x.chamber)}}" width="25" height="25">
                                                <div style="display:inline">{{x.chamber | capitalize}}</div>
                                            </td>
                                            <td>{{x.committee_id}}</td>
                                            <td>{{x.name}}</td>
                                            <td>{{x.parent_committee_id}}</td>
                                            <td>{{(!x.phone)?"N.A.":x.phone}}</td>
                                            <td>{{(!x.office)?"N.A.":x.office}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <center>
                                    <dir-pagination-controls max-size="10" boundary-links="true" direction-links="true" pagination-id="recordsCommitteesHouse"></dir-pagination-controls>
                                </center>
                            </div>
                            <!--table rsesponsive-->

                        </div>
                        <!-------COMMITTEES FIRST TAB ENDS - HOUSE--->
                        <!-------COMMITTEES SECOND TAB STARTS - SENATE-->
                        <div id="commsenate" class="tab-pane fade">
                            <br>
                            <div class="table-header">
                                <h5 class="table-header-style" style="display:inline-block">Senate</h5>
                                <span class="searchValue">
                            <input type="text" class="form-control" placeholder="Search" ng-model="searchCommitteeSenate">
                            </span>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th> </th>
                                            <th style="min-width:100px;">Chamber</th>
                                            <th>Committee ID</th>
                                            <th>Name</th>
                                            <th>Parent Committee</th>
                                            <th>Contact</th>
                                            <th>Office</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr dir-paginate="x in recordsCommittees | orderBy: 'committee_id' | filter: filterSenate | filter: searchCommitteeSenate | itemsPerPage:10" pagination-id="recordsCommitteesSenate">
                                            <td>
                                                <button class="glyphicon glyphicon-star-empty" ng-click="storeFavComm(x)"></button>
                                            </td>
                                            <td><img ng-src="{{checkChamberImage(x.chamber)}}" width="25" height="25">
                                                <div style="display:inline">{{x.chamber | capitalize}}</div>
                                            </td>
                                            <td>{{x.committee_id}}</td>
                                            <td>{{x.name}}</td>
                                            <td>{{x.parent_committee_id}}</td>
                                            <td>{{(!x.phone)?"N.A.":x.phone}}</td>
                                            <td>{{(!x.office)?"N.A.":x.office}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <center>
                                    <dir-pagination-controls max-size="10" boundary-links="true" direction-links="true" pagination-id="recordsCommitteesSenate"></dir-pagination-controls>
                                </center>
                            </div>
                            <!--table rsesponsive-->

                        </div>
                        <!-------COMMITTEES SECOND TAB ENDS - SENATE-->
                        <!-------COMMITTEES THIRD TAB STARTS - JOINT-->
                        <div id="commjoint" class="tab-pane fade">
                            <br>
                            <div class="table-header">
                                <h5 class="table-header-style" style="display:inline-block">Joint</h5>
                                <span class="searchValue">
                            <input type="text" class="form-control" placeholder="Search" ng-model="searchCommitteeJoint">
                            </span>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th> </th>
                                            <th style="min-width:100px;">Chamber</th>
                                            <th>Committee ID</th>
                                            <th>Name</th>
                                            <th>Parent Committee</th>
                                            <th>Contact</th>
                                            <th>Office</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr dir-paginate="x in recordsCommittees | orderBy: 'committee_id' | filter: filterJoint | filter: searchCommitteeJoint | itemsPerPage:10" pagination-id="recordsCommitteesJoint">
                                            <td>
                                                <button class="glyphicon glyphicon-star-empty" ng-click="storeFavComm(x)"></button>
                                            </td>
                                            <td><img ng-src="{{checkChamberImage(x.chamber)}}" width="25" height="25">
                                                <div style="display:inline">{{x.chamber | capitalize}}</div>
                                            </td>
                                            <td>{{x.committee_id}}</td>
                                            <td>{{x.name}}</td>
                                            <td>{{x.parent_committee_id}}</td>
                                            <td>{{(!x.phone)?"N.A.":x.phone}}</td>
                                            <td>{{(!x.office)?"N.A.":x.office}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <center>
                                    <dir-pagination-controls max-size="10" boundary-links="true" direction-links="true" pagination-id="recordsCommitteesJoint"></dir-pagination-controls>
                                </center>
                            </div>
                            <!--table responsive-->

                        </div>
                        <!-------COMMITTEES THIRD TAB ENDS - JOINT--->
                    </div>
                </div>
                <!--tab content-->
                <!--outer container-fluid-->
            </div>
            <!---------------------DISPLAY FOR COMMITTEES ENDS HERE----->

            <!------------DISPLAY FOR FAVORITES STARTS HERE--->
            <div class="container-fluid" id="favoritesDisplay">
                <h2>Favorites</h2>
                <hr>
                <div class="container-fluid">
                    <ul class="nav nav-tabs">
                        <li class="active"><a data-toggle="tab" href="#favleg">Legislators</a></li>
                        <li><a data-toggle="tab" href="#favbill">Bills</a></li>
                        <li><a data-toggle="tab" href="#favcomm">Committees</a></li>
                    </ul>

                    <!-------FAVORITES FIRST TAB STARTS - LEGISLATORS----->
                    <div class="tab-content">
                        <div id="favleg" class="tab-pane fade in active">
                            <br>
                            <div class="table-header">
                                <h5 class="table-header-style" style="display:inline-block">Favorite Legislators</h5>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th> </th>
                                            <th>Image</th>
                                            <th>Party</th>
                                            <th>Name</th>
                                            <th>Chamber</th>
                                            <th>State</th>
                                            <th>Email</th>
                                            <th> </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="x in getFavLeg">
                                            <td>
                                                <button class="glyphicon glyphicon-trash" ng-click="delFavLeg(x)"> </button>
                                            </td>
                                            <td><img src="https://theunitedstates.io/images/congress/original/{{x.bioguide_id}}.jpg" width="25" height="25"></td>
                                            <td><img src="{{checkPartyImage(x.party)}}" width="25" height="25"></td>
                                            <td>{{x.last_name + ", " + x.first_name}}</td>
                                            <td><img src="{{checkChamberImage(x.chamber)}}" width="25" height="25">
                                                <div style="display:inline">{{x.chamber | capitalize}}</div>
                                            </td>
                                            <td>{{x.state_name}}</td>
                                            <td><a href="mailto:{{checkEmail(x.oc_email)}}">{{checkEmailText(x.oc_email)}}</a></td>
                                            <td>
                                                <button type="button" class="btn btn-primary" ng-click="getViewDetailsLeg(x)">View Details</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!--table responsive-->

                        </div>
                        <!-------FAVORITES FIRST TAB ENDS - LEGISLATORS----->
                        <!-------FAVORITES SECOND TAB STARTS- BILLS----->
                        <div id="favbill" class="tab-pane fade">
                            <br>
                            <div class="table-header">
                                <h5 class="table-header-style" style="display:inline-block">Favorite Bills</h5>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th> </th>
                                            <th>Bill ID</th>
                                            <th>Bill Type</th>
                                            <th>Title</th>
                                            <th>Chamber</th>
                                            <th>Introduced On</th>
                                            <th>Sponsor</th>
                                            <th> </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="x in getFavBill">
                                            <td>
                                                <button class="glyphicon glyphicon-trash" ng-click="delFavBill(x)"> </button>
                                            </td>
                                            <td>{{x.bill_id | uppercase}}</td>
                                            <td>{{x.bill_type | uppercase}}</td>
                                            <td>{{x.official_title}}</td>
                                            <td><img src="{{checkChamberImage(x.chamber)}}" width="25" height="25">
                                                <div style="display:inline">{{x.chamber | capitalize}}</div>
                                            </td>
                                            <td>{{x.introduced_on}}</td>
                                            <td>{{x.sponsor.title + ". " + x.sponsor.last_name + ", " + x.sponsor.first_name}}</td>
                                            <td>
                                                <button type="button" class="btn btn-primary" ng-click="getViewDetailsBills(x)">View Details</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!--table responsive-->

                        </div>
                        <!-------FAVORITES SECOND TAB ENDS - BILLS----->
                        <!-------FAVORITES THIRD TAB STARTS- COMMITTEES----->
                        <div id="favcomm" class="tab-pane fade">
                            <br>
                            <div class="table-header">
                                <h5 class="table-header-style" style="display:inline-block">Favorite Committees</h5>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th> </th>
                                            <th>Chamber</th>
                                            <th>Committee ID</th>
                                            <th>Name</th>
                                            <th>Parent Committee</th>
                                            <th>Sub Committee</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="x in getFavComm">
                                            <td>
                                                <button class="glyphicon glyphicon-trash" ng-click="delFavComm(x)"> </button>
                                            </td>
                                            <td><img src="{{checkChamberImage(x.chamber)}}" width="25" height="25">
                                                <div style="display:inline">{{x.chamber | capitalize}}</div>
                                            </td>
                                            <td>{{x.committee_id}}</td>
                                            <td>{{x.name}}</td>
                                            <td>{{(!x.parent_committee_id)?"":x.parent_committee_id}}</td>
                                            <td>{{x.subcommittee}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!--table responsive-->

                        </div>
                        <!-------FAVORITES THIRD TAB ENDS - COMMITTEES----->
                    </div>
                </div>
                <!--tab content-->
            </div>
        </div>
        <!-- page-content-wrapper -->
    </div>
    <!-- /#wrapper -->

    <script>
        var app = angular.module('myApp', ['angularUtils.directives.dirPagination', 'angularMoment']);

        //localStorage.removeItem("legFav");
        //CONTROLLER FOR LEGISLATORS DISPLAY
        app.controller('myCtrlLeg', function ($scope, $http, moment) {
            $scope.getFavLeg = JSON.parse(localStorage.getItem("legFav"));
            $scope.getFavBill = JSON.parse(localStorage.getItem("billFav"));
            $scope.getFavComm = JSON.parse(localStorage.getItem("commFav"));
            $http({
                method: 'GET',
                url: 'http://hw8surabhisubramany-env.us-west-2.elasticbeanstalk.com/index.php?legislators=true'
            }).success(function (data) {
                //$scope.content = data;
                $scope.records = data.results;
            });

            $http({
                method: 'GET',
                url: 'http://hw8surabhisubramany-env.us-west-2.elasticbeanstalk.com/index.php?activebills=true'
            }).success(function (data) {
                //$scope.content = data;
                $scope.recordsActiveBills = data.results;
            });

            $http({
                method: 'GET',
                url: 'http://hw8surabhisubramany-env.us-west-2.elasticbeanstalk.com/index.php?newbills=true'
            }).success(function (data) {
                //$scope.content = data;
                $scope.recordsNewBills = data.results;
            });

            $http({
                method: 'GET',
                url: 'http://hw8surabhisubramany-env.us-west-2.elasticbeanstalk.com/index.php?committees=true'
            }).success(function (data) {
                //$scope.content = data;
                $scope.recordsCommittees = data.results;
            });

            angular.element(legislatorsDisplay).show();
            angular.element(billsDisplay).hide();
            angular.element(committeesDisplay).hide();
            angular.element(favoritesDisplay).hide();

            $scope.checkDistrict = function (districtVal) {
                if ((!districtVal) || (districtVal.toString().trim().length < 1)) {
                    return "N.A.";
                } else {
                    return "District" + " " + districtVal.toString();
                }
            }

            $scope.checkEmail = function (email) {
                if ((!email) || (email.length < 1)) {
                    return "";
                } else {
                    return email;
                }
            }

            $scope.checkEmailText = function (email) {
                if ((!email) || (email.length < 1)) {
                    return "";
                } else {
                    return email;
                }
            }

            $scope.checkCongressUrl = function (url) {
                if ((!url) || (url.length < 1)) {
                    return "";
                } else {
                    return url;
                }
            }

            $scope.checkCongressUrlText = function (url) {
                if ((!url) || (url.url < 1)) {
                    return "";
                } else {
                    return "URL";
                }
            }

            $scope.checkBillUrl = function (url) {
                if ((!url) || (url.length < 1)) {
                    return "";
                } else {
                    return url;
                }
            }

            $scope.checkBillUrlText = function (url) {
                if ((!url) || (url.url < 1)) {
                    return "";
                } else {
                    return "Link";
                }
            }

            $scope.checkContact = function (contact) {
                if ((!contact) || (contact.length < 1)) {
                    return "";
                } else {
                    return contact;
                }
            }

            $scope.checkContactText = function (contact) {
                if ((!contact) || (contact.length < 1)) {
                    return "";
                } else {
                    return contact;
                }
            }

            $scope.checkWebsite = function (website) {
                if ((!website) || (website.length < 1)) {
                    return "N.A.";
                } else {
                    return website;
                }
            }

            $scope.checkPdf = function (pdf) {
                if ((!pdf) || (pdf.length < 1)) {
                    return "";
                } else {
                    return pdf;
                }
            }

            $scope.checkPdfText = function (pdf) {
                if ((!pdf) || (pdf.length < 1)) {
                    return "";
                } else {
                    return "Link";
                }
            }

            $scope.checkFax = function (fax) {
                if ((!fax) || (fax.length < 1)) {
                    return "N.A.";
                } else {
                    return fax;
                }
            }

            $scope.checkBillStatus = function (status) {
                if (status == true) {
                    return "Active";
                } else if (status == false) {
                    return "New";
                }
            }

            $scope.convertDate = function (value) {
                if (!value) {
                    return "";
                }
                return moment(value, "YYYY-MM-DD").format('ll').toString();
            }

            $scope.progressValue = function (start, end) {
                var numerator = moment().diff(moment(start, "YYYY-MM-DD"), "days");
                var denominator = moment(end, "YYYY-MM-DD").diff(moment(start, "YYYY-MM-DD"), "days");
                var percentageVal = Math.round((numerator / denominator) * 100);
                return percentageVal;
            }

            $scope.checkStorageLeg = function (x) {
                if (localStorage.getItem("legFav") == null)
                    return false;
                else {
                    var legCheck = JSON.parse(localStorage.getItem("legFav"));
                    for (var i = 0; i < legCheck.length; i++) {
                        if (legCheck[i].bioguide_id === x.bioguide_id) {
                            return true;
                        }
                    }
                    return false;
                }
            }

            $scope.checkStorageBill = function (x) {
                if (localStorage.getItem("billFav") == null)
                    return false;
                else {
                    var billCheck = JSON.parse(localStorage.getItem("billFav"));
                    for (var i = 0; i < billCheck.length; i++) {
                        if (billCheck[i].bill_id === x.bill_id) {
                            return true;
                        }
                    }
                    return false;
                }
            }

            $scope.checkStorageComm = function (x) {
                if (localStorage.getItem("commFav") == null)
                    return false;
                else {
                    var commCheck = JSON.parse(localStorage.getItem("commFav"));
                    for (var i = 0; i < commCheck.length; i++) {
                        if (commCheck[i].committee_id === x.committee_id) {
                            return true;
                        }
                    }
                    return false;
                }
            }

            //POPULATE FAVORITE LEGISLATORS
            $scope.storeFavLeg = function (legObj) {
                //console.log(legObj);
                if (localStorage.getItem("legFav") == null) {
                    var arrBlank = [];
                    localStorage.setItem("legFav", JSON.stringify(arrBlank));
                }
                var legCheck = JSON.parse(localStorage.getItem("legFav"));
                //console.log(legCheck)
                console.log(legObj.bioguide_id)
                var removeId = -1;
                for (var i = 0; i < legCheck.length; i++) {
                    console.log("legCheck bioguide_id: " + legCheck[i].bioguide_id);
                    if (legCheck[i].bioguide_id === legObj.bioguide_id) {
                        removeId = i;
                        break;
                    }
                }
                if (removeId === -1) {
                    legCheck.push(legObj);
                    //console.log("add: " + legCheck.length)
                    localStorage.setItem("legFav", JSON.stringify(legCheck));
                } else {
                    legCheck.splice(removeId, 1);
                    //console.log("remove: " + legCheck.length)
                    localStorage.setItem("legFav", JSON.stringify(legCheck));
                }

                $scope.getFavLeg = JSON.parse(localStorage.getItem("legFav"));
                //console.log($scope.getFavLeg);
            }

            //DELETE FAVORITE LEGISLATORS
            $scope.delFavLeg = function (legObj) {
                //console.log(legObj);
                if (localStorage.getItem("legFav") == null) {
                    return;
                } else {
                    var legCheck = JSON.parse(localStorage.getItem("legFav"));
                }
                //console.log(legCheck)
                //console.log(legObj.bioguide_id);
                var removeId = -1;
                for (var i = 0; i < legCheck.length; i++) {
                    //console.log("legCheck bioguide_id: " + legCheck[i].bioguide_id);
                    if (legCheck[i].bioguide_id === legObj.bioguide_id) {
                        removeId = i;
                        break;
                    }
                }
                if (removeId === -1) {
                    return;
                } else {
                    legCheck.splice(removeId, 1);
                    //console.log("remove: " + legCheck.length)
                    localStorage.setItem("legFav", JSON.stringify(legCheck));
                }

                $scope.getFavLeg = JSON.parse(localStorage.getItem("legFav"));
                //console.log($scope.getFavLeg);
            }

            //POPULATE FAVORITE BILLS
            $scope.storeFavBill = function (billObj) {
                //console.log(billObj);
                if (localStorage.getItem("billFav") == null) {
                    var arrBlank = [];
                    localStorage.setItem("billFav", JSON.stringify(arrBlank));
                }
                var billCheck = JSON.parse(localStorage.getItem("billFav"));
                //console.log(billCheck);
                //console.log(billObj.bill_id);
                var removeId = -1;
                for (var i = 0; i < billCheck.length; i++) {
                    //console.log("billCheck bill_id: " + billCheck[i].bill_id);
                    if (billCheck[i].bill_id === billObj.bill_id) {
                        removeId = i;
                        break;
                    }
                }
                if (removeId === -1) {
                    billCheck.push(billObj);
                    //console.log("add: " + billCheck.length)
                    localStorage.setItem("billFav", JSON.stringify(billCheck));
                } else {
                    billCheck.splice(removeId, 1);
                    //console.log("remove: " + billCheck.length)
                    localStorage.setItem("billFav", JSON.stringify(billCheck));
                }

                $scope.getFavBill = JSON.parse(localStorage.getItem("billFav"));
            }

            //DELETE FAVORITE BILLS
            $scope.delFavBill = function (billObj) {
                //console.log(billObj);
                if (localStorage.getItem("billFav") == null) {
                    return;
                } else {
                    var billCheck = JSON.parse(localStorage.getItem("billFav"));
                }
                //console.log(billCheck);
                //console.log(billObj.bill_id);
                var removeId = -1;
                for (var i = 0; i < billCheck.length; i++) {
                    //console.log("billCheck bill_id: " + billCheck[i].bill_id);
                    if (billCheck[i].bill_id === billObj.bill_id) {
                        removeId = i;
                        break;
                    }
                }
                if (removeId === -1) {
                    return;
                } else {
                    billCheck.splice(removeId, 1);
                    //console.log("remove: " + billCheck.length)
                    localStorage.setItem("billFav", JSON.stringify(billCheck));
                }

                $scope.getFavBill = JSON.parse(localStorage.getItem("billFav"));
            }

            //POPULATE FAVORITE COMMITTEES
            $scope.storeFavComm = function (commObj) {
                //console.log(commObj);
                if (localStorage.getItem("commFav") == null) {
                    var arrBlank = [];
                    localStorage.setItem("commFav", JSON.stringify(arrBlank));
                }
                var commCheck = JSON.parse(localStorage.getItem("commFav"));
                //console.log(commCheck);
                //console.log(commObj.committee_id);
                var removeId = -1;
                for (var i = 0; i < commCheck.length; i++) {
                    //console.log("commCheck committee_id: " + commCheck[i].committee_id);
                    if (commCheck[i].committee_id === commObj.committee_id) {
                        removeId = i;
                        break;
                    }
                }
                if (removeId === -1) {
                    commCheck.push(commObj);
                    //console.log("add: " + commCheck.length)
                    localStorage.setItem("commFav", JSON.stringify(commCheck));
                } else {
                    commCheck.splice(removeId, 1);
                    //console.log("remove: " + commCheck.length)
                    localStorage.setItem("commFav", JSON.stringify(commCheck));
                }

                $scope.getFavComm = JSON.parse(localStorage.getItem("commFav"));
            }

            //DELETE FAVORITE COMMITTEES
            $scope.delFavComm = function (commObj) {
                //console.log(commObj);
                if (localStorage.getItem("commFav") == null) {
                    return;
                } else {
                    var commCheck = JSON.parse(localStorage.getItem("commFav"));
                }
                //console.log(commCheck);
                //console.log(commObj.committee_id);
                var removeId = -1;
                for (var i = 0; i < commCheck.length; i++) {
                    //console.log("commCheck committee_id: " + commCheck[i].committee_id);
                    if (commCheck[i].committee_id === commObj.committee_id) {
                        removeId = i;
                        break;
                    }
                }
                if (removeId === -1) {
                    return;
                } else {
                    commCheck.splice(removeId, 1);
                    //console.log("remove: " + commCheck.length)
                    localStorage.setItem("commFav", JSON.stringify(commCheck));
                }

                $scope.getFavComm = JSON.parse(localStorage.getItem("commFav"));
            }

            $scope.stateNames = [
                {
                    "name": "Alabama",

        },
                {
                    "name": "Alaska",

        },
                {
                    "name": "American Samoa",

        },
                {
                    "name": "Arizona",

        },
                {
                    "name": "Arkansas",

        },
                {
                    "name": "California",

        },
                {
                    "name": "Colorado",

        },
                {
                    "name": "Connecticut",

        },
                {
                    "name": "Delaware",

        },
                {
                    "name": "District Of Columbia",

        },
                {
                    "name": "Florida",

        },
                {
                    "name": "Georgia",

        },
                {
                    "name": "Guam",

        },
                {
                    "name": "Hawaii",

        },
                {
                    "name": "Idaho",

        },
                {
                    "name": "Illinois",

        },
                {
                    "name": "Indiana",

        },
                {
                    "name": "Iowa",

        },
                {
                    "name": "Kansas",

        },
                {
                    "name": "Kentucky",

        },
                {
                    "name": "Louisiana",

        },
                {
                    "name": "Maine",

        },
                {
                    "name": "Maryland",

        },
                {
                    "name": "Massachusetts",

        },
                {
                    "name": "Michigan",

        },
                {
                    "name": "Minnesota",

        },
                {
                    "name": "Mississippi",

        },
                {
                    "name": "Missouri",

        },
                {
                    "name": "Montana",

        },
                {
                    "name": "Nebraska",

        },
                {
                    "name": "Nevada",

        },
                {
                    "name": "New Hampshire",

        },
                {
                    "name": "New Jersey",

        },
                {
                    "name": "New Mexico",

        },
                {
                    "name": "New York",

        },
                {
                    "name": "North Carolina",

        },
                {
                    "name": "North Dakota",

        },
                {
                    "name": "Northern Mariana Islands",

        },
                {
                    "name": "Ohio",

        },
                {
                    "name": "Oklahoma",

        },
                {
                    "name": "Oregon",

        },
                {
                    "name": "Pennsylvania",

        },
                {
                    "name": "Puerto Rico",

        },
                {
                    "name": "Rhode Island",

        },
                {
                    "name": "South Carolina",

        },
                {
                    "name": "South Dakota",

        },
                {
                    "name": "Tennessee",

        },
                {
                    "name": "Texas",

        },
                {
                    "name": "US Virgin Islands",

        },
                {
                    "name": "Utah",

        },
                {
                    "name": "Vermont",

        },
                {
                    "name": "Virginia",

        },
                {
                    "name": "Washington",

        },
                {
                    "name": "West Virginia",

        },
                {
                    "name": "Wisconsin",

        },
                {
                    "name": "Wyoming",

        }
      ];

            $scope.checkPartyImage = function (party) {
                if (party == "R") {
                    return "http://cs-server.usc.edu:45678/hw/hw8/images/r.png";
                } else if (party == "D") {
                    return "http://cs-server.usc.edu:45678/hw/hw8/images/d.png";
                } else if (party == "I") {
                    return "http://independentamericanparty.org/wp-content/themes/v/images/logo-american-heritage-academy.png";
                }
            }

            $scope.checkParty = function (party) {
                if (party == "R") {
                    return "Republic";
                } else if (party == "D") {
                    return "Democrat";
                } else if (party == "I") {
                    return "Independent";
                }
            }

            $scope.checkChamberImage = function (chamber) {
                if (chamber == "house") {
                    return "http://cs-server.usc.edu:45678/hw/hw8/images/h.png";
                } else if (chamber == "senate") {
                    return "http://cs-server.usc.edu:45678/hw/hw8/images/s.svg";
                } else if (chamber == "joint") {
                    return "http://cs-server.usc.edu:45678/hw/hw8/images/s.svg";
                }
            }

            $scope.getViewDetailsLeg = function (x) {
                $scope.getCurrentLegislator = x;
                $http({
                    method: 'GET',
                    url: 'http://hw8surabhisubramany-env.us-west-2.elasticbeanstalk.com/index.php?viewdetailslegbills=' + x.bioguide_id
                }).success(function (data) {
                    //$scope.content = data;
                    $scope.getCurrentLegislatorBills = data.results;
                    //console.log($scope.getCurrentLegislatorBills);

                });
                $http({
                    method: 'GET',
                    url: 'http://hw8surabhisubramany-env.us-west-2.elasticbeanstalk.com/index.php?viewdetailslegcomm=' + x.bioguide_id
                }).success(function (data) {
                    //$scope.content = data;
                    $scope.getCurrentLegislatorCommittees = data.results;
                    //console.log($scope.getCurrentLegislatorCommittees);
                    angular.element(viewDetailsCarouselLegislators).carousel(0);
                    angular.element(favoritesDisplay).hide();


                    angular.element(legislatorsDisplay).show();
                    angular.element(viewDetailsCarouselLegislators).carousel(1);
                    //angular.element(viewDetailsCarouselLegislators).carousel('next');
                });
            }

            $scope.getViewDetailsBills = function (x) {
                $scope.getCurrentBill = x;
                //$scope.progressBarVal = Math.round
                //console.log($scope.getCurrentBill);
                angular.element(viewDetailsCarouselBills).carousel(0);
                angular.element(favoritesDisplay).hide();


                angular.element(billsDisplay).show();
                angular.element(viewDetailsCarouselBills).carousel(1);
                //angular.element(viewDetailsCarouselBills).carousel('next');
            }

            $scope.goBackLeg = function () {
                angular.element(viewDetailsCarouselLegislators).carousel('prev');
            }

            $scope.goBackBill = function () {
                angular.element(viewDetailsCarouselBills).carousel('prev');
            }

            $scope.capitalizeFunction = function (input) {
                return (!!input) ? input.charAt(0).toUpperCase() + input.substr(1).toLowerCase() : '';
            }


            $scope.filterHouse = "House";
            $scope.filterSenate = "Senate";
            $scope.filterJoint = "Joint";

            $scope.checkClick = function (clickedValue) {
                //alert("hello");
                //console.log("Entered this function");
                if (clickedValue == 'legislators') {
                    angular.element(legislatorsDisplay).show();
                    angular.element(billsDisplay).hide();
                    angular.element(committeesDisplay).hide();
                    angular.element(favoritesDisplay).hide();
                    //angular.element(initialDisplayLeg).hide();
                } else if (clickedValue == 'bills') {
                    angular.element(legislatorsDisplay).hide();
                    angular.element(billsDisplay).show();
                    angular.element(committeesDisplay).hide();
                    angular.element(favoritesDisplay).hide();
                } else if (clickedValue == 'committees') {
                    angular.element(legislatorsDisplay).hide();
                    angular.element(billsDisplay).hide();
                    angular.element(committeesDisplay).show();
                    angular.element(favoritesDisplay).hide();
                } else if (clickedValue == 'favorites') {
                    angular.element(legislatorsDisplay).hide();
                    angular.element(billsDisplay).hide();
                    angular.element(committeesDisplay).hide();
                    angular.element(favoritesDisplay).show();
                }

            }
        });

        app.filter('capitalize', function () {
            return function (input) {
                return (!!input) ? input.charAt(0).toUpperCase() + input.substr(1).toLowerCase() : '';
            }
        });

        //        $("#viewDetailsCarousel").carousel();

        $("#menu-toggle").click(function (e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggled");
        });

        /*//FOR CURRENTLY ACTIVE ITEM IN THE NAVBAR
        $(".sidebar-nav a").on("click", function () {
            $(".sidebar-nav").find(".active").removeClass("active");
            $(this).parent().addClass("active");
        });*/
    </script>


</body>

</html>